<?php
$categories = getCategories();

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
if ($_SERVER['REQUEST_METHOD'] === 'POST' && !isset($_POST['action'])) {
    $productData = [
        'name' => trim($_POST['name'] ?? ''),
        'latin_name' => trim($_POST['latin_name'] ?? ''),
        'price' => (float)($_POST['price'] ?? 0),
        'old_price' => (float)($_POST['old_price'] ?? 0),
        'description' => trim($_POST['description'] ?? ''),
        'short_description' => trim($_POST['short_description'] ?? ''),
        'category_id' => (int)($_POST['category_id'] ?? 0),
        'difficulty' => trim($_POST['difficulty'] ?? '–ª–µ–≥–∫–æ'),
        'care_level' => trim($_POST['care_level'] ?? '–Ω–∞—á–∏–Ω–∞—é—â–∏–π'),
        'size' => trim($_POST['size'] ?? ''),
        'temperature' => trim($_POST['temperature'] ?? ''),
        'ph_level' => trim($_POST['ph_level'] ?? ''),
        'lighting' => trim($_POST['lighting'] ?? ''),
        'tags' => trim($_POST['tags'] ?? ''),
        'meta_title' => trim($_POST['meta_title'] ?? ''),
        'meta_description' => trim($_POST['meta_description'] ?? ''),
        'stock_quantity' => (int)($_POST['stock_quantity'] ?? 0),
        'sku' => trim($_POST['sku'] ?? ''),
        'manufacturer' => trim($_POST['manufacturer'] ?? ''),
        'country' => trim($_POST['country'] ?? ''),
        'warranty_months' => (int)($_POST['warranty_months'] ?? 0),
        'main_image' => $_POST['main_image'] ?? '',
        'gallery' => $_POST['gallery'] ?? '[]',
        'badges' => $_POST['badges'] ?? '[]',
        'status' => 1
    ];

    if (addProduct($productData)) {
        $success = "–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!";
    } else {
        $error = "–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞";
    }
}
?>

<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="h3 mb-1 text-gray-800">–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="?page=dashboard">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li class="breadcrumb-item"><a href="?page=products">–¢–æ–≤–∞—Ä—ã</a></li>
                    <li class="breadcrumb-item active">–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä</li>
                </ol>
            </nav>
        </div>
        <div>
            <a href="?page=products" class="btn btn-secondary">
                <i class="fas fa-arrow-left me-1"></i>–ù–∞–∑–∞–¥ –∫ —Ç–æ–≤–∞—Ä–∞–º
            </a>
        </div>
    </div>
</div>

<?php if (isset($success)): ?>
    <div class="alert alert-success alert-dismissible fade show">
        <i class="fas fa-check-circle me-2"></i><?= $success ?>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
<?php endif; ?>

<?php if (isset($error)): ?>
    <div class="alert alert-danger alert-dismissible fade show">
        <i class="fas fa-exclamation-triangle me-2"></i><?= $error ?>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
<?php endif; ?>

<div class="row">
    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
    <div class="col-xl-8 col-lg-7">
        <form method="POST" id="productForm">

            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex justify-content-between align-items-center">
                    <h6 class="m-0 font-weight-bold text-primary">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h6>
                    <div class="dropdown">
                        <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-robot me-1"></i>–ò–ò –ü–æ–º–æ—â–Ω–∏–∫
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="aiGenerateAll()">
                                <i class="fas fa-magic me-2"></i>–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                            </a>
                            <a class="dropdown-item" href="#" onclick="aiSuggestName()">
                                <i class="fas fa-tag me-2"></i>–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ
                            </a>
                            <a class="dropdown-item" href="#" onclick="showTemplates()">
                                <i class="fas fa-templates me-2"></i>–®–∞–±–ª–æ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">
                                    –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ <span class="text-danger">*</span>
                                    <i class="fas fa-question-circle text-muted ms-1" title="–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞. –•–æ—Ä–æ—à–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä"></i>
                                </label>
                                <input type="text" class="form-control form-control-lg" name="name" id="productName" required 
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–Ω—É–±–∏–∞—Å –Ω–∞–Ω–∞ - –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–æ–µ –∞–∫–≤–∞—Ä–∏—É–º–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ">
                                <div class="form-text d-flex justify-content-between">
                                    <span>–°–∏–º–≤–æ–ª–æ–≤: <span id="nameLength" class="fw-bold text-primary">0</span>/100</span>
                                    <span id="nameSeoScore"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">–ê—Ä—Ç–∏–∫—É–ª (SKU)</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" name="sku" id="productSKU" placeholder="–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è">
                                    <button type="button" class="btn btn-outline-secondary" onclick="generateSKU()" title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–∏–∫—É–ª">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">–ö–∞—Ç–µ–≥–æ—Ä–∏—è <span class="text-danger">*</span></label>
                                <select class="form-select" name="category_id" id="productCategory" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                    <?php foreach ($categories as $category): ?>
                                        <option value="<?= $category['id'] ?>"><?= htmlspecialchars($category['name']) ?></option>
                                    <?php endforeach; ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">
                                    –¶–µ–Ω–∞ <span class="text-danger">*</span>
                                    <button type="button" class="btn btn-sm btn-outline-warning ms-1" onclick="aiSuggestPrice()" title="–ò–ò –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É">
                                        <i class="fas fa-robot"></i>
                                    </button>
                                </label>
                                <div class="input-group">
                                    <input type="number" class="form-control" name="price" id="productPrice" required 
                                           min="0" step="0.01" placeholder="0">
                                    <span class="input-group-text">‚ÇΩ</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (–¥–ª—è —Å–∫–∏–¥–∫–∏)</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" name="old_price" id="productOldPrice" 
                                           min="0" step="0.01" placeholder="0">
                                    <span class="input-group-text">‚ÇΩ</span>
                                </div>
                                <div class="form-text" id="discountInfo"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">–õ–∞—Ç–∏–Ω—Å–∫–æ–µ/–Ω–∞—É—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
                                <input type="text" class="form-control" name="latin_name" id="productLatinName"
                                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Anubias barteri var. nana">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">–°–ª–æ–∂–Ω–æ—Å—Ç—å —É—Ö–æ–¥–∞</label>
                                <select class="form-select" name="difficulty">
                                    <option value="–ª–µ–≥–∫–æ">üü¢ –õ–µ–≥–∫–æ</option>
                                    <option value="—Å—Ä–µ–¥–Ω–µ">üü° –°—Ä–µ–¥–Ω–µ</option>
                                    <option value="—Å–ª–æ–∂–Ω–æ">üî¥ –°–ª–æ–∂–Ω–æ</option>
                                    <option value="—ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π">üü£ –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group mb-3">
                                <label class="form-label fw-semibold">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ</label>
                                <input type="number" class="form-control" name="stock_quantity" 
                                       min="0" value="0" placeholder="0">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –û–ø–∏—Å–∞–Ω–∏—è -->
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex justify-content-between align-items-center">
                    <h6 class="m-0 font-weight-bold text-primary">–û–ø–∏—Å–∞–Ω–∏—è –∏ –∫–æ–Ω—Ç–µ–Ω—Ç</h6>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-sm btn-outline-primary" onclick="aiGenerateDescription()">
                            <i class="fas fa-robot me-1"></i>–ò–ò –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-success" onclick="aiImproveDescription()">
                            <i class="fas fa-magic me-1"></i>–£–ª—É—á—à–∏—Ç—å
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-info" onclick="showDescriptionTemplates()">
                            <i class="fas fa-file-text me-1"></i>–®–∞–±–ª–æ–Ω—ã
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="form-group mb-3">
                        <label class="form-label fw-semibold">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea class="form-control" name="short_description" id="productShortDescription" rows="2" 
                                  placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ (–¥–æ 150 —Å–∏–º–≤–æ–ª–æ–≤)"></textarea>
                        <div class="form-text">
                            <span>–°–∏–º–≤–æ–ª–æ–≤: <span id="shortDescLength">0</span>/150</span>
                            <span class="ms-3 text-muted">–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ —Ç–æ–≤–∞—Ä–æ–≤</span>
                        </div>
                    </div>

                    <div class="form-group mb-3">
                        <label class="form-label fw-semibold">
                            –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ <span class="text-danger">*</span>
                            <button type="button" class="btn btn-sm btn-outline-warning ms-1" onclick="aiAnalyzeDescription()" title="–ò–ò –∞–Ω–∞–ª–∏–∑ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏">
                                <i class="fas fa-search"></i>
                            </button>
                        </label>
                        <textarea class="form-control" name="description" id="productDescription" rows="8" required
                                  placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —É—Ö–æ–¥–µ..."></textarea>
                        <div class="form-text d-flex justify-content-between">
                            <span>–°–∏–º–≤–æ–ª–æ–≤: <span id="descLength" class="fw-bold">0</span></span>
                            <span>–ß–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å: <span id="readabilityScore" class="fw-bold">‚Äî</span></span>
                            <span>SEO: <span id="seoAnalysis" class="fw-bold">‚Äî</span></span>
                        </div>
                    </div>

                    <div class="form-group mb-0">
                        <label class="form-label fw-semibold">
                            –¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
                            <button type="button" class="btn btn-sm btn-outline-info ms-1" onclick="aiGenerateTags()" title="–ò–ò –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Ç–µ–≥–∏">
                                <i class="fas fa-hashtag"></i>
                            </button>
                        </label>
                        <input type="text" class="form-control" name="tags" id="productTags"
                               placeholder="–∞–∫–≤–∞—Ä–∏—É–º, —Ä–∞—Å—Ç–µ–Ω–∏—è, –¥–µ–∫–æ—Ä, –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–µ">
                        <div class="form-text">–ü–æ–º–æ–≥–∞—é—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫</div>
                    </div>
                </div>
            </div>

            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-images me-2"></i>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ <span class="text-danger">*</span>
                                    <small class="text-muted">(–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ)</small>
                                </label>
                                <div class="image-upload-area" id="mainImageUpload">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h5>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞</h5>
                                        <p class="text-muted mb-3">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</p>
                                        <button type="button" class="btn btn-primary">
                                            <i class="fas fa-folder-open me-1"></i>–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                                        </button>
                                        <p class="small text-muted mt-2">
                                            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: JPG, PNG, GIF, WebP<br>
                                            –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB<br>
                                            –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 800x600px
                                        </p>
                                    </div>
                                </div>
                                <input type="hidden" name="main_image" id="mainImagePath">
                            </div>
                        </div>

                        <!-- –ì–∞–ª–µ—Ä–µ—è -->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                                    <small class="text-muted">(–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ)</small>
                                </label>
                                <div class="image-upload-area" id="galleryUpload">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-images fa-3x text-secondary mb-3"></i>
                                        <h6>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h6>
                                        <p class="text-muted mb-3">–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤</p>
                                        <button type="button" class="btn btn-outline-secondary">
                                            <i class="fas fa-plus me-1"></i>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
                                        </button>
                                        <p class="small text-muted mt-2">
                                            –ú–∞–∫—Å–∏–º—É–º 10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                                        </p>
                                    </div>
                                </div>
                                <div id="galleryPreview" class="gallery-preview mt-3"></div>
                                <input type="hidden" name="gallery" id="galleryPaths" value="[]">
                            </div>
                        </div>
                    </div>

                    <!-- –ò–ò –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ñ–æ—Ç–æ -->
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="bg-light rounded p-3">
                                <h6 class="mb-3">ü§ñ –ò–ò –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h6>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-sm btn-outline-primary" onclick="aiGenerateImage()">
                                        <i class="fas fa-magic me-1"></i>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-success" onclick="aiEnhanceImages()">
                                        <i class="fas fa-wand-magic-sparkles me-1"></i>–£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-warning" onclick="aiRemoveBackground()">
                                        <i class="fas fa-cut me-1"></i>–£–¥–∞–ª–∏—Ç—å —Ñ–æ–Ω
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-info" onclick="aiOptimizeImages()">
                                        <i class="fas fa-compress me-1"></i>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
            <div class="card shadow mb-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <button type="button" class="btn btn-outline-secondary me-2" onclick="saveAsDraft()">
                                <i class="fas fa-save me-1"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
                            </button>
                            <button type="button" class="btn btn-outline-info" onclick="previewProduct()">
                                <i class="fas fa-eye me-1"></i>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                            </button>
                        </div>
                        <div>
                            <button type="reset" class="btn btn-secondary me-2" onclick="confirmReset()">
                                <i class="fas fa-undo me-1"></i>–°–±—Ä–æ—Å–∏—Ç—å
                            </button>
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-check me-1"></i>–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="col-xl-4 col-lg-5">

        <!-- –ò–ò –ü–æ–º–æ—â–Ω–∏–∫ -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-robot me-2"></i>ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫
                </h6>
            </div>
            <div class="card-body">
                <div class="ai-chat-container" id="aiChatContainer" style="max-height: 300px; overflow-y: auto;">
                    <div class="ai-message mb-3">
                        <div class="d-flex">
                            <div class="ai-avatar bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 35px; height: 35px; font-size: 14px;">
                                ü§ñ
                            </div>
                            <div class="ai-message-content">
                                <div class="bg-light rounded p-2">
                                    <strong>–ò–ò –ü–æ–º–æ—â–Ω–∏–∫:</strong><br>
                                    –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –æ—Ç–ª–∏—á–Ω—ã–π —Ç–æ–≤–∞—Ä. –ù–∞—á–Ω—ë–º —Å –Ω–∞–∑–≤–∞–Ω–∏—è - –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ, –∏ —è –ø—Ä–µ–¥–ª–æ–∂—É –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏!
                                </div>
                                <small class="text-muted">–¢–æ–ª—å–∫–æ —á—Ç–æ</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ai-input-area mt-3">
                    <div class="input-group">
                        <input type="text" class="form-control" id="aiChatInput" placeholder="–°–ø—Ä–æ—Å–∏—Ç–µ –ò–ò –æ —Ç–æ–≤–∞—Ä–µ...">
                        <button class="btn btn-primary" onclick="sendAIMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <div class="ai-quick-actions mt-3">
                    <div class="d-grid gap-2">
                        <button class="btn btn-sm btn-outline-primary" onclick="aiSuggestAll()">
                            <i class="fas fa-wand-magic-sparkles me-1"></i>–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                        </button>
                        <button class="btn btn-sm btn-outline-success" onclick="aiAnalyzeCompetitors()">
                            <i class="fas fa-search-dollar me-1"></i>–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –®–∞–±–ª–æ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">üìã –®–∞–±–ª–æ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤</h6>
            </div>
            <div class="card-body">
                <div class="template-categories">
                    <div class="mb-3">
                        <h6 class="text-success mb-2">üåø –†–∞—Å—Ç–µ–Ω–∏—è</h6>
                        <div class="list-group list-group-flush">
                            <button type="button" class="list-group-item list-group-item-action py-2 border-0" 
                                    onclick="applyTemplate('plant', 'anubias')">
                                <small><strong>–ê–Ω—É–±–∏–∞—Å –Ω–∞–Ω–∞</strong><br>
                                <span class="text-muted">–ù–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞</span></small>
                            </button>
                            <button type="button" class="list-group-item list-group-item-action py-2 border-0" 
                                    onclick="applyTemplate('plant', 'vallisneria')">
                                <small><strong>–í–∞–ª–ª–∏—Å–Ω–µ—Ä–∏—è</strong><br>
                                <span class="text-muted">–ë—ã—Å—Ç—Ä–æ—Ä–∞—Å—Ç—É—â–µ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –∑–∞–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞</span></small>
                            </button>
                        </div>
                    </div>

                    <div class="mb-3">
                        <h6 class="text-info mb-2">üê† –†—ã–±–∫–∏</h6>
                        <div class="list-group list-group-flush">
                            <button type="button" class="list-group-item list-group-item-action py-2 border-0" 
                                    onclick="applyTemplate('fish', 'guppy')">
                                <small><strong>–ì—É–ø–ø–∏</strong><br>
                                <span class="text-muted">–Ø—Ä–∫–∞—è –∂–∏–≤–æ—Ä–æ–¥—è—â–∞—è —Ä—ã–±–∫–∞</span></small>
                            </button>
                            <button type="button" class="list-group-item list-group-item-action py-2 border-0" 
                                    onclick="applyTemplate('fish', 'neon')">
                                <small><strong>–ù–µ–æ–Ω</strong><br>
                                <span class="text-muted">–°—Ç–∞–π–Ω–∞—è —Å–≤–µ—Ç—è—â–∞—è—Å—è —Ä—ã–±–∫–∞</span></small>
                            </button>
                        </div>
                    </div>

                    <div class="mb-0">
                        <h6 class="text-warning mb-2">‚öôÔ∏è –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h6>
                        <div class="list-group list-group-flush">
                            <button type="button" class="list-group-item list-group-item-action py-2 border-0" 
                                    onclick="applyTemplate('equipment', 'filter')">
                                <small><strong>–§–∏–ª—å—Ç—Ä –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π</strong><br>
                                <span class="text-muted">–°–∏—Å—Ç–µ–º–∞ –æ—á–∏—Å—Ç–∫–∏ –≤–æ–¥—ã</span></small>
                            </button>
                            <button type="button" class="list-group-item list-group-item-action py-2 border-0" 
                                    onclick="applyTemplate('equipment', 'heater')">
                                <small><strong>–ù–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å</strong><br>
                                <span class="text-muted">–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã</span></small>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">üîß –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-6">
                        <div class="form-group mb-3">
                            <label class="form-label small">–†–∞–∑–º–µ—Ä</label>
                            <input type="text" class="form-control form-control-sm" name="size" placeholder="10-15 —Å–º">
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group mb-3">
                            <label class="form-label small">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</label>
                            <input type="text" class="form-control form-control-sm" name="temperature" placeholder="22-26¬∞C">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <div class="form-group mb-3">
                            <label class="form-label small">pH —É—Ä–æ–≤–µ–Ω—å</label>
                            <input type="text" class="form-control form-control-sm" name="ph_level" placeholder="6.0-7.5">
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group mb-3">
                            <label class="form-label small">–û—Å–≤–µ—â–µ–Ω–∏–µ</label>
                            <select class="form-select form-select-sm" name="lighting">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                                <option value="—Å–ª–∞–±–æ–µ">–°–ª–∞–±–æ–µ</option>
                                <option value="—Å—Ä–µ–¥–Ω–µ–µ">–°—Ä–µ–¥–Ω–µ–µ</option>
                                <option value="—è—Ä–∫–æ–µ">–Ø—Ä–∫–æ–µ</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –Ø—Ä–ª—ã–∫–∏ –∏ –±–µ–π–¥–∂–∏ -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">üè∑Ô∏è –Ø—Ä–ª—ã–∫–∏ —Ç–æ–≤–∞—Ä–∞</h6>
            </div>
            <div class="card-body">
                <div class="badges-container">
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="badge_new" value="new" onchange="updateBadges()">
                        <label class="form-check-label" for="badge_new">
                            <span class="badge bg-success">üÜï –ù–æ–≤–∏–Ω–∫–∞</span>
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="badge_hit" value="hit" onchange="updateBadges()">
                        <label class="form-check-label" for="badge_hit">
                            <span class="badge bg-danger">üî• –•–∏—Ç –ø—Ä–æ–¥–∞–∂</span>
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="badge_recommend" value="recommend" onchange="updateBadges()">
                        <label class="form-check-label" for="badge_recommend">
                            <span class="badge bg-warning text-dark">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</span>
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="badge_discount" value="discount" onchange="updateBadges()">
                        <label class="form-check-label" for="badge_discount">
                            <span class="badge bg-info">üí∏ –°–∫–∏–¥–∫–∞</span>
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="badge_premium" value="premium" onchange="updateBadges()">
                        <label class="form-check-label" for="badge_premium">
                            <span class="badge bg-dark">üíé –ü—Ä–µ–º–∏—É–º</span>
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="badge_eco" value="eco" onchange="updateBadges()">
                        <label class="form-check-label" for="badge_eco">
                            <span class="badge bg-success">üåø –≠–∫–æ</span>
                        </label>
                    </div>
                </div>
                <input type="hidden" name="badges" id="selectedBadges" value="[]">
            </div>
        </div>

        <!-- SEO –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">üéØ SEO –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h6>
            </div>
            <div class="card-body">
                <div class="form-group mb-3">
                    <label class="form-label small">Meta Title</label>
                    <input type="text" class="form-control form-control-sm" name="meta_title" maxlength="60">
                    <small class="text-muted">–°–∏–º–≤–æ–ª–æ–≤: <span id="metaTitleLength">0</span>/60</small>
                </div>
                <div class="form-group mb-3">
                    <label class="form-label small">Meta Description</label>
                    <textarea class="form-control form-control-sm" name="meta_description" rows="3" maxlength="160"></textarea>
                    <small class="text-muted">–°–∏–º–≤–æ–ª–æ–≤: <span id="metaDescLength">0</span>/160</small>
                </div>
                <button type="button" class="btn btn-sm btn-outline-primary w-100" onclick="generateSEO()">
                    <i class="fas fa-search me-1"></i>–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è SEO
                </button>
            </div>
        </div>

        <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h6>
            </div>
            <div class="card-body">
                <div class="product-preview" id="productPreview">
                    <div class="preview-badges mb-2" id="previewBadges"></div>
                    <div class="preview-image mb-2">
                        <div class="ratio ratio-1x1 bg-light rounded d-flex align-items-center justify-content-center border">
                            <i class="fas fa-image fa-2x text-muted" id="previewImageIcon"></i>
                        </div>
                    </div>
                    <h6 class="preview-name fw-bold mb-1" id="previewName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h6>
                    <p class="preview-description text-muted small mb-2" id="previewDescription">
                        –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...
                    </p>
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <span class="preview-price fw-bold text-success" id="previewPrice">0 ‚ÇΩ</span>
                            <small class="preview-old-price text-muted text-decoration-line-through ms-1" 
                                   id="previewOldPrice" style="display: none;"></small>
                        </div>
                        <small class="text-muted" id="previewCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</small>
                    </div>
                    <div class="preview-specs mt-2" id="previewSpecs"></div>
                </div>
            </div>
        </div>

    </div>
</div>

<style>
/* –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
.page-header {
    background: #fff;
    padding: 1.5rem 0;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid #e3e6f0;
}

.breadcrumb {
    background: none;
    padding: 0;
    margin: 0;
    font-size: 0.85rem;
}

.breadcrumb-item + .breadcrumb-item::before {
    color: #858796;
    content: "‚Ä∫";
}

.card {
    border: 1px solid #e3e6f0;
    border-radius: 0.5rem;
}

.card-header {
    background-color: #f8f9fc;
    border-bottom: 1px solid #e3e6f0;
}

.form-control, .form-select {
    border-color: #d1d3e2;
    font-size: 0.9rem;
}

.form-control:focus, .form-select:focus {
    border-color: #4e73df;
    box-shadow: 0 0 0 0.2rem rgba(78, 115, 223, 0.25);
}

.image-upload-area {
    border: 2px dashed #d1d3e2;
    border-radius: 0.5rem;
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    background: #f8f9fc;
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.image-upload-area:hover {
    border-color: #4e73df;
    background: #f0f2ff;
    transform: translateY(-2px);
}

.image-upload-area.dragover {
    border-color: #4e73df;
    background: #e8ecff;
    border-style: solid;
}

.image-upload-area.has-image {
    padding: 1rem;
}

.image-preview-container {
    position: relative;
    display: inline-block;
    border-radius: 0.5rem;
    overflow: hidden;
}

.image-preview-container img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 0.5rem;
}

.image-actions {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    gap: 5px;
}

.image-actions .btn {
    width: 30px;
    height: 30px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

.gallery-preview {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 10px;
}

.gallery-item {
    position: relative;
    border-radius: 0.5rem;
    overflow: hidden;
    border: 2px solid #e3e6f0;
}

.gallery-item img {
    width: 100%;
    height: 100px;
    object-fit: cover;
}

.gallery-item .remove-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: rgba(220, 53, 69, 0.9);
    color: white;
    border: none;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ai-message {
    margin-bottom: 1rem;
}

.ai-avatar {
    flex-shrink: 0;
}

.upload-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(78, 115, 223, 0.1);
    padding: 10px;
}

.btn {
    font-size: 0.875rem;
    border-radius: 0.375rem;
}

.btn-primary {
    background-color: #4e73df;
    border-color: #4e73df;
}

.btn-primary:hover {
    background-color: #2e59d9;
    border-color: #2653d4;
}

.text-gray-800 { color: #5a5c69 !important; }
.font-weight-bold { font-weight: 700 !important; }
.fw-semibold { font-weight: 600 !important; }

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.loading {
    animation: pulse 1.5s infinite;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .page-header { padding: 1rem 0; }
    .card-body { padding: 1rem; }
    .image-upload-area { min-height: 150px; padding: 1.5rem; }
    .gallery-preview { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); }
}
</style>

<script>
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let galleryImages = [];
let aiTemplates = {
    plant: {
        anubias: {
            name: "–ê–Ω—É–±–∏–∞—Å –Ω–∞–Ω–∞",
            latin_name: "Anubias barteri var. nana", 
            price: 450,
            description: "–ù–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–æ–µ –º–µ–¥–ª–µ–Ω–Ω–æ—Ä–∞—Å—Ç—É—â–µ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ —Å –∂–µ—Å—Ç–∫–∏–º–∏ —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–º–∏ –ª–∏—Å—Ç—å—è–º–∏. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–æ–≤. –†–∞—Å—Ç–µ—Ç –ø—Ä–∏ —Å–ª–∞–±–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–∞—á–∏ CO2. –ú–æ–∂–Ω–æ –∫—Ä–µ–ø–∏—Ç—å –∫ –∫–æ—Ä—è–≥–∞–º –∏ –∫–∞–º–Ω—è–º.",
            short_description: "–ù–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–æ–µ –∞–∫–≤–∞—Ä–∏—É–º–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞",
            size: "10-15 —Å–º",
            lighting: "—Å–ª–∞–±–æ–µ",
            difficulty: "–ª–µ–≥–∫–æ",
            tags: "–∞–Ω—É–±–∏–∞—Å, –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–µ, –º–µ–¥–ª–µ–Ω–Ω–æ—Ä–∞—Å—Ç—É—â–∏–µ, —Ç–µ–Ω–µ–ª—é–±–∏–≤—ã–µ, –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω"
        },
        vallisneria: {
            name: "–í–∞–ª–ª–∏—Å–Ω–µ—Ä–∏—è —Å–ø–∏—Ä–∞–ª—å–Ω–∞—è",
            latin_name: "Vallisneria spiralis",
            price: 250,
            description: "–ë—ã—Å—Ç—Ä–æ—Ä–∞—Å—Ç—É—â–µ–µ –¥–ª–∏–Ω–Ω–æ—Å—Ç–µ–±–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –¥–ª—è –∑–∞–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞ –∞–∫–≤–∞—Ä–∏—É–º–∞. –û–±—Ä–∞–∑—É–µ—Ç –≥—É—Å—Ç—ã–µ –∑–∞—Ä–æ—Å–ª–∏, —Ö–æ—Ä–æ—à–æ –æ—á–∏—â–∞–µ—Ç –≤–æ–¥—É –∏ –≤—ã–¥–µ–ª—è–µ—Ç –∫–∏—Å–ª–æ—Ä–æ–¥. –†–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è –ø–æ–±–µ–≥–∞–º–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–æ–≤ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.",
            short_description: "–ë—ã—Å—Ç—Ä–æ—Ä–∞—Å—Ç—É—â–µ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –∑–∞–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞",
            size: "30-60 —Å–º",
            lighting: "—Å—Ä–µ–¥–Ω–µ–µ",
            difficulty: "–ª–µ–≥–∫–æ", 
            tags: "–≤–∞–ª–ª–∏—Å–Ω–µ—Ä–∏—è, –±—ã—Å—Ç—Ä–æ—Ä–∞—Å—Ç—É—â–∏–µ, –∑–∞–¥–Ω–∏–π –ø–ª–∞–Ω, –∫–∏—Å–ª–æ—Ä–æ–¥, –ø–æ–±–µ–≥–∏"
        }
    },
    fish: {
        guppy: {
            name: "–ì—É–ø–ø–∏ –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω–∞—è",
            latin_name: "Poecilia reticulata",
            price: 150,
            description: "–Ø—Ä–∫–∞—è –∏ –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–∞—è –∂–∏–≤–æ—Ä–æ–¥—è—â–∞—è —Ä—ã–±–∫–∞, –∏–¥–µ–∞–ª—å–Ω–∞—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–æ–≤. –°–∞–º—Ü—ã –∏–º–µ—é—Ç —è—Ä–∫—É—é –æ–∫—Ä–∞—Å–∫—É –∏ —Ä–∞–∑–≤–∏—Ç—ã–µ –ø–ª–∞–≤–Ω–∏–∫–∏. –ú–∏—Ä–æ–ª—é–±–∏–≤—ã–µ, —Ö–æ—Ä–æ—à–æ —É–∂–∏–≤–∞—é—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –≤–∏–¥–∞–º–∏. –õ–µ–≥–∫–æ —Ä–∞–∑–º–Ω–æ–∂–∞—é—Ç—Å—è.",
            short_description: "–Ø—Ä–∫–∞—è –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–∞—è –∂–∏–≤–æ—Ä–æ–¥—è—â–∞—è —Ä—ã–±–∫–∞",
            size: "3-6 —Å–º",
            temperature: "22-28¬∞C",
            ph_level: "6.5-8.0",
            difficulty: "–ª–µ–≥–∫–æ",
            tags: "–≥—É–ø–ø–∏, –∂–∏–≤–æ—Ä–æ–¥—è—â–∏–µ, —è—Ä–∫–∏–µ, –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–µ, –Ω–∞—á–∏–Ω–∞—é—â–∏–º"
        },
        neon: {
            name: "–ù–µ–æ–Ω –≥–æ–ª—É–±–æ–π",
            latin_name: "Paracheirodon innesi",
            price: 80,
            description: "–ú–∞–ª–µ–Ω—å–∫–∞—è —Å—Ç–∞–π–Ω–∞—è —Ä—ã–±–∫–∞ —Å —è—Ä–∫–æ-–≥–æ–ª—É–±–æ–π –Ω–µ–æ–Ω–æ–≤–æ–π –ø–æ–ª–æ—Å–∫–æ–π –≤–¥–æ–ª—å —Ç–µ–ª–∞. –°–æ–∑–¥–∞–µ—Ç –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤ —Å—Ç–∞–µ –æ—Ç 10-15 –æ—Å–æ–±–µ–π. –ú–∏—Ä–Ω—ã–µ, –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –æ–±—â–∏—Ö –∞–∫–≤–∞—Ä–∏—É–º–æ–≤. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç –º—è–≥–∫—É—é —Å–ª–∞–±–æ–∫–∏—Å–ª—É—é –≤–æ–¥—É.",
            short_description: "–Ø—Ä–∫–∞—è —Å—Ç–∞–π–Ω–∞—è —Ä—ã–±–∫–∞ —Å –Ω–µ–æ–Ω–æ–≤–æ–π –ø–æ–ª–æ—Å–∫–æ–π",
            size: "3-4 —Å–º",
            temperature: "20-26¬∞C",
            ph_level: "5.5-7.0",
            difficulty: "—Å—Ä–µ–¥–Ω–µ",
            tags: "–Ω–µ–æ–Ω, —Å—Ç–∞–π–Ω—ã–µ, —è—Ä–∫–∏–µ, –º–∏—Ä–Ω—ã–µ, –Ω–µ–±–æ–ª—å—à–∏–µ"
        }
    },
    equipment: {
        filter: {
            name: "–§–∏–ª—å—Ç—Ä –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–∫–≤–∞—Ä–∏—É–º–Ω—ã–π",
            price: 1200,
            description: "–ù–∞–¥–µ–∂–Ω—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π –∏ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –≤–æ–¥—ã. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–æ–≤ –æ–±—ä–µ–º–æ–º –¥–æ 100 –ª–∏—Ç—Ä–æ–≤. –†–µ–≥—É–ª–∏—Ä—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–µ—Å—à—É–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞. –í –∫–æ–º–ø–ª–µ–∫—Ç–µ –≥—É–±–∫–∏ –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏.",
            short_description: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤–æ–¥—ã",
            difficulty: "–ª–µ–≥–∫–æ",
            warranty_months: 24,
            tags: "—Ñ–∏–ª—å—Ç—Ä, –æ—á–∏—Å—Ç–∫–∞, –±–∏–æ—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π, —Ç–∏—Ö–∏–π"
        },
        heater: {
            name: "–û–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª—å —Å —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–º",
            price: 800,
            description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª—å —Å —Ç–æ—á–Ω—ã–º —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–º –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤–æ–¥—ã. –ú–æ—â–Ω–æ—Å—Ç—å 50W, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–æ–≤ 50-80 –ª–∏—Ç—Ä–æ–≤. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä–µ–≤–∞, –≤–ª–∞–≥–æ–∑–∞—â–∏—â–µ–Ω–Ω—ã–π –∫–æ—Ä–ø—É—Å.",
            short_description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª—å –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–∞",
            difficulty: "–ª–µ–≥–∫–æ", 
            warranty_months: 12,
            tags: "–æ–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª—å, —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –∞–≤—Ç–æ–º–∞—Ç"
        }
    }
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    initImageUploads();
    initFormTracking();
    initAIChat();
    updatePreview();

    // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç –ò–ò
    setTimeout(() => {
        addAIMessage("–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å! –ù–∞—á–Ω–∏—Ç–µ —Å –≤–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞, –∏ —è –ø—Ä–µ–¥–ª–æ–∂—É –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ üöÄ");
    }, 1000);
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
function initImageUploads() {
    // –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    const mainUpload = document.getElementById('mainImageUpload');
    if (mainUpload) {
        mainUpload.addEventListener('click', (e) => {
            if (!e.target.closest('.btn-danger') && !e.target.closest('.image-actions')) {
                selectFiles('main');
            }
        });

        mainUpload.addEventListener('dragover', (e) => handleDragOver(e, mainUpload));
        mainUpload.addEventListener('dragleave', (e) => handleDragLeave(e, mainUpload));
        mainUpload.addEventListener('drop', (e) => handleDrop(e, 'main'));
    }

    // –ì–∞–ª–µ—Ä–µ—è
    const galleryUpload = document.getElementById('galleryUpload');
    if (galleryUpload) {
        galleryUpload.addEventListener('click', (e) => {
            if (!e.target.closest('.remove-btn')) {
                selectFiles('gallery');
            }
        });

        galleryUpload.addEventListener('dragover', (e) => handleDragOver(e, galleryUpload));
        galleryUpload.addEventListener('dragleave', (e) => handleDragLeave(e, galleryUpload));
        galleryUpload.addEventListener('drop', (e) => handleDrop(e, 'gallery'));
    }
}

function selectFiles(type) {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.multiple = type === 'gallery';

    input.onchange = (e) => {
        const files = Array.from(e.target.files);
        if (files.length > 0) {
            processFiles(files, type);
        }
    };

    input.click();
}

function handleDragOver(e, element) {
    e.preventDefault();
    e.stopPropagation();
    element.classList.add('dragover');
}

function handleDragLeave(e, element) {
    e.preventDefault();
    e.stopPropagation();
    if (!element.contains(e.relatedTarget)) {
        element.classList.remove('dragover');
    }
}

function handleDrop(e, type) {
    e.preventDefault();
    e.stopPropagation();
    e.currentTarget.classList.remove('dragover');

    const files = Array.from(e.dataTransfer.files);
    if (files.length > 0) {
        processFiles(files, type);
    }
}

async function processFiles(files, type) {
    const validFiles = files.filter(file => {
        if (!file.type.startsWith('image/')) {
            showNotification(`–§–∞–π–ª ${file.name} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º`, 'warning');
            return false;
        }

        if (file.size > 5 * 1024 * 1024) {
            showNotification(`–§–∞–π–ª ${file.name} —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å–∏–º—É–º 5MB)`, 'warning');
            return false;
        }

        return true;
    });

    if (validFiles.length === 0) return;

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    showUploadProgress(true);

    try {
        for (const file of validFiles) {
            await uploadImage(file, type);
        }
    } finally {
        showUploadProgress(false);
    }
}

async function uploadImage(file, type) {
    try {
        const formData = new FormData();
        formData.append('images', file);

        const response = await fetch('upload.php', {
            method: 'POST',
            body: formData
        });

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const contentType = response.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
            const text = await response.text();
            console.error('–ü–æ–ª—É—á–µ–Ω –Ω–µ JSON:', text);
            throw new Error('–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç');
        }

        const result = await response.json();

        if (result.success && result.files.length > 0) {
            const imageData = result.files[0];

            if (type === 'main') {
                setMainImage(imageData);
            } else {
                addToGallery(imageData);
            }

            updatePreview();
            showNotification(`–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${imageData.original_name} –∑–∞–≥—Ä—É–∂–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ`, 'success');

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ò–ò
            addAIMessage(`–û—Ç–ª–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ! –†–∞–∑–º–µ—Ä: ${imageData.dimensions.width}x${imageData.dimensions.height}px. –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ 2-3 —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ —Å —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∫—É—Ä—Å–æ–≤ üì∏`);

        } else {
            throw new Error(result.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');
        }

        if (result.errors && result.errors.length > 0) {
            result.errors.forEach(error => {
                showNotification(error, 'warning');
            });
        }

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
        showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ' + error.message, 'error');
    }
}

function setMainImage(imageData) {
    const mainUpload = document.getElementById('mainImageUpload');
    const mainPath = document.getElementById('mainImagePath');

    mainUpload.innerHTML = `
        <div class="image-preview-container">
            <img src="${imageData.url}" alt="–û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="img-fluid">
            <div class="image-actions">
                <button type="button" class="btn btn-sm btn-primary" onclick="cropImage('${imageData.url}')" title="–û–±—Ä–µ–∑–∞—Ç—å">
                    <i class="fas fa-crop"></i>
                </button>
                <button type="button" class="btn btn-sm btn-danger" onclick="removeMainImage()" title="–£–¥–∞–ª–∏—Ç—å">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    `;

    mainUpload.classList.add('has-image');
    mainPath.value = imageData.url;
}

function removeMainImage() {
    const mainUpload = document.getElementById('mainImageUpload');
    const mainPath = document.getElementById('mainImagePath');

    mainUpload.innerHTML = `
        <div class="upload-placeholder">
            <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
            <h5>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞</h5>
            <p class="text-muted mb-3">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</p>
            <button type="button" class="btn btn-primary">
                <i class="fas fa-folder-open me-1"></i>–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
            </button>
            <p class="small text-muted mt-2">
                –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: JPG, PNG, GIF, WebP<br>
                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB<br>
                –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 800x600px
            </p>
        </div>
    `;

    mainUpload.classList.remove('has-image');
    mainPath.value = '';
    updatePreview();
}

function addToGallery(imageData) {
    galleryImages.push(imageData);
    updateGalleryPreview();
    updateGalleryInput();
}

function updateGalleryPreview() {
    const preview = document.getElementById('galleryPreview');

    if (galleryImages.length === 0) {
        preview.innerHTML = '';
        return;
    }

    preview.innerHTML = galleryImages.map((imageData, index) => `
        <div class="gallery-item">
            <img src="${imageData.thumbnail || imageData.url}" alt="–ì–∞–ª–µ—Ä–µ—è ${index + 1}">
            <button type="button" class="remove-btn" onclick="removeFromGallery(${index})" title="–£–¥–∞–ª–∏—Ç—å">
                <i class="fas fa-times"></i>
            </button>
        </div>
    `).join('');
}

function removeFromGallery(index) {
    galleryImages.splice(index, 1);
    updateGalleryPreview();
    updateGalleryInput();
    updatePreview();
}

function updateGalleryInput() {
    document.getElementById('galleryPaths').value = JSON.stringify(galleryImages.map(img => img.url));
}

function showUploadProgress(show) {
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
    const areas = document.querySelectorAll('.image-upload-area');
    areas.forEach(area => {
        if (show) {
            area.classList.add('loading');
        } else {
            area.classList.remove('loading');
        }
    });
}

// –ò–ò —Ñ—É–Ω–∫—Ü–∏–∏
function initAIChat() {
    const input = document.getElementById('aiChatInput');
    if (input) {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendAIMessage();
            }
        });
    }
}

function sendAIMessage() {
    const input = document.getElementById('aiChatInput');
    const message = input.value.trim();

    if (!message) return;

    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    addUserMessage(message);
    input.value = '';

    // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ –ò–ò
    addAIMessage("–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...", true);

    setTimeout(() => {
        removeTemporaryMessages();
        processAIRequest(message);
    }, 1500);
}

function addUserMessage(message) {
    const container = document.getElementById('aiChatContainer');
    const messageDiv = document.createElement('div');
    messageDiv.className = 'user-message mb-3';

    messageDiv.innerHTML = `
        <div class="d-flex justify-content-end">
            <div class="user-message-content">
                <div class="bg-primary text-white rounded p-2">
                    ${message}
                </div>
                <small class="text-muted float-end">–¢–æ–ª—å–∫–æ —á—Ç–æ</small>
            </div>
            <div class="user-avatar bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center ms-3" style="width: 35px; height: 35px; font-size: 14px;">
                üë§
            </div>
        </div>
    `;

    container.appendChild(messageDiv);
    container.scrollTop = container.scrollHeight;
}

function addAIMessage(message, isTemporary = false) {
    const container = document.getElementById('aiChatContainer');
    const messageDiv = document.createElement('div');
    messageDiv.className = `ai-message mb-3 ${isTemporary ? 'temporary' : ''}`;

    messageDiv.innerHTML = `
        <div class="d-flex">
            <div class="ai-avatar bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 35px; height: 35px; font-size: 14px;">
                ü§ñ
            </div>
            <div class="ai-message-content">
                <div class="bg-light rounded p-2">
                    <strong>–ò–ò –ü–æ–º–æ—â–Ω–∏–∫:</strong><br>
                    ${message}
                </div>
                <small class="text-muted">–¢–æ–ª—å–∫–æ —á—Ç–æ</small>
            </div>
        </div>
    `;

    container.appendChild(messageDiv);
    container.scrollTop = container.scrollHeight;
}

function removeTemporaryMessages() {
    const tempMessages = document.querySelectorAll('.temporary');
    tempMessages.forEach(msg => msg.remove());
}

function processAIRequest(message) {
    const lowerMessage = message.toLowerCase();
    let response = "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! ü§î ";

    if (lowerMessage.includes('—Ü–µ–Ω–∞') || lowerMessage.includes('—Å—Ç–æ–∏–º–æ—Å—Ç—å')) {
        response += "–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏–∑—É—á–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –ú–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–∞.";
    } else if (lowerMessage.includes('–æ–ø–∏—Å–∞–Ω–∏–µ')) {
        response += "–•–æ—Ä–æ—à–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è?";
    } else if (lowerMessage.includes('—Ñ–æ—Ç–æ') || lowerMessage.includes('–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ')) {
        response += "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã! –†–µ–∫–æ–º–µ–Ω–¥—É—é: –æ—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ –Ω–∞ –±–µ–ª–æ–º —Ñ–æ–Ω–µ, –¥–µ—Ç–∞–ª–∏ –∫—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º, —Ç–æ–≤–∞—Ä –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. –ú–æ–≥—É —É–ª—É—á—à–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.";
    } else if (lowerMessage.includes('seo') || lowerMessage.includes('–ø–æ–∏—Å–∫')) {
        response += "–î–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ SEO –≤–∞–∂–Ω—ã: —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –º–µ—Ç–∞-—Ç–µ–≥–∏. –ú–æ–≥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è.";
    } else {
        const responses = [
            "–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–µ–º –¥–µ—Ç–∞–ª–∏ —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞. –ö–∞–∫—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤—ã–±–µ—Ä–µ–º?",
            "–ü–æ–Ω—è–ª –≤–∞—Å! –ú–æ–≥—É –ø–æ–º–æ—á—å —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –ø–æ–ª–µ–π. –° —á–µ–≥–æ –Ω–∞—á–Ω–µ–º?",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –†–µ–∫–æ–º–µ–Ω–¥—É—é —Ç–∞–∫–∂–µ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ —è—Ä–ª—ã–∫–∏ —Ç–æ–≤–∞—Ä–∞.",
            "–•–æ—Ä–æ—à–∏–π –ø–æ–¥—Ö–æ–¥! –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ - –æ–Ω–∏ –ø–æ–≤—ã—à–∞—é—Ç –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ 40%.",
            "–û—Ç–ª–∏—á–Ω–æ! –ú–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ."
        ];
        response += responses[Math.floor(Math.random() * responses.length)];
    }

    addAIMessage(response);
}

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
function applyTemplate(category, type) {
    const template = aiTemplates[category]?.[type];
    if (!template) return;

    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã
    Object.keys(template).forEach(key => {
        const input = document.querySelector(`[name="${key}"], #product${key.charAt(0).toUpperCase() + key.slice(1)}`);
        if (input) {
            input.value = template[key];
            input.dispatchEvent(new Event('input'));
        }
    });

    generateSKU();
    updatePreview();

    addAIMessage(`–ü—Ä–∏–º–µ–Ω–µ–Ω —à–∞–±–ª–æ–Ω "${template.name}"! –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã. –ú–æ–∂–µ—Ç–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–¥ —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ üéØ`);
    showNotification(`–®–∞–±–ª–æ–Ω "${template.name}" –ø—Ä–∏–º–µ–Ω–µ–Ω!`, 'success');
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SKU
function generateSKU() {
    const name = document.getElementById('productName').value || 'PRODUCT';
    const category = document.getElementById('productCategory').selectedOptions[0]?.text || 'CAT';
    const timestamp = Date.now().toString().slice(-4);

    const sku = (category.substring(0, 3) + '_' + name.substring(0, 3) + '_' + timestamp)
        .toUpperCase().replace(/[^A-Z0-9_]/g, '');

    document.getElementById('productSKU').value = sku;
}

// –ò–ò —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
async function aiGenerateDescription() {
    const name = document.getElementById('productName').value;
    const category = document.getElementById('productCategory').selectedOptions[0]?.text || '';

    if (!name) {
        showNotification('–°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', 'warning');
        return;
    }

    addAIMessage("–ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...", true);

    setTimeout(() => {
        removeTemporaryMessages();

        const descriptions = [
            `${name} - –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–∏–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category}". –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é, –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å—é. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö, —Ç–∞–∫ –∏ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–æ–≤. 

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏  
‚Ä¢ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –∞–∫–≤–∞—Ä–∏—É–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
‚Ä¢ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–µ—Å–Ω–æ–≤–æ–¥–Ω—ã—Ö –∏ –º–æ—Ä—Å–∫–∏—Ö –∞–∫–≤–∞—Ä–∏—É–º–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ –∏ –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π.`,

            `–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º ${name} - –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ —Å—Ñ–µ—Ä–µ –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–∏–∫–∏! –≠—Ç–æ—Ç —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category}" —Å—Ç–∞–Ω–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫ –≤–∞—à–µ–º—É –∞–∫–≤–∞—Ä–∏—É–º—É.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚Ä¢ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
‚Ä¢ –£–¥–æ–±—Å—Ç–≤–æ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏
‚Ä¢ –î–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫ —Å–ª—É–∂–±—ã
‚Ä¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–æ–≤ —Ä–∞–∑–ª–∏—á–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –∏ —Ç–∏–ø–∞. –ü–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.`
        ];

        const randomDescription = descriptions[Math.floor(Math.random() * descriptions.length)];
        document.getElementById('productDescription').value = randomDescription;

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
        const shortDesc = `${name} - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–∏–∫–∏ —Å –æ—Ç–ª–∏—á–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é`;
        document.getElementById('productShortDescription').value = shortDesc;

        updatePreview();
        addAIMessage("–ì–æ—Ç–æ–≤–æ! –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–¥ —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ ‚ú®");
    }, 2000);
}

async function aiImproveDescription() {
    const description = document.getElementById('productDescription').value;

    if (!description) {
        showNotification('–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', 'warning');
        return;
    }

    addAIMessage("–£–ª—É—á—à–∞—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ...", true);

    setTimeout(() => {
        removeTemporaryMessages();

        const improvements = [
            "\n\nüíé –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ü–û–ö–£–ü–ö–ò –£ –ù–ê–°:\n‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞\n‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏\n‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤\n‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π",

            "\n\nüî¨ –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò:\n‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ\n‚Ä¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º\n‚Ä¢ –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã\n‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ",

            "\n\n‚≠ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –≠–ö–°–ü–ï–†–¢–û–í:\n‚Ä¢ –û–¥–æ–±—Ä–µ–Ω–æ –≤–µ–¥—É—â–∏–º–∏ –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç–∞–º–∏\n‚Ä¢ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏\n‚Ä¢ –í—ã—Å–æ–∫–∏–µ –æ—Ü–µ–Ω–∫–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–∞–Ω–∏—è—Ö\n‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
        ];

        const randomImprovement = improvements[Math.floor(Math.random() * improvements.length)];
        document.getElementById('productDescription').value = description + randomImprovement;

        updatePreview();
        addAIMessage("–û–ø–∏—Å–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–æ! –î–æ–±–∞–≤–∏–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ üöÄ");
    }, 1500);
}

async function aiSuggestPrice() {
    const name = document.getElementById('productName').value;
    const category = document.getElementById('productCategory').selectedOptions[0]?.text || '';

    if (!name) {
        showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ü–µ–Ω—ã', 'warning');
        return;
    }

    addAIMessage("–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä—ã–Ω–æ–∫ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É...", true);

    setTimeout(() => {
        removeTemporaryMessages();

        // –ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
        const basePrices = {
            '–†–∞—Å—Ç–µ–Ω–∏—è': rand(150, 600),
            '–†—ã–±–∫–∏': rand(80, 400), 
            '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ': rand(500, 3000),
            '–î–µ–∫–æ—Ä': rand(200, 800),
            '–ö–æ—Ä–º–∞': rand(100, 500),
            '–•–∏–º–∏—è': rand(150, 700)
        };

        const basePrice = basePrices[category] || rand(200, 800);
        const suggestedPrice = Math.round(basePrice * (0.8 + Math.random() * 0.4));
        const oldPrice = Math.round(suggestedPrice * 1.2);

        document.getElementById('productPrice').value = suggestedPrice;
        document.getElementById('productOldPrice').value = oldPrice;

        calculateDiscount();
        updatePreview();

        addAIMessage(`–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ü–µ–Ω–∞: ${suggestedPrice} ‚ÇΩ (–±—ã–ª–∞ ${oldPrice} ‚ÇΩ). –°–∫–∏–¥–∫–∞ –ø—Ä–∏–≤–ª–µ—á–µ—Ç –±–æ–ª—å—à–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π! –¶–µ–Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ —Ä—ã–Ω–∫–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞ üí∞`);
    }, 2000);
}

async function aiGenerateTags() {
    const name = document.getElementById('productName').value;
    const category = document.getElementById('productCategory').selectedOptions[0]?.text || '';
    const description = document.getElementById('productDescription').value;

    if (!name) {
        showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–≥–æ–≤', 'warning');
        return;
    }

    // –ë–∞–∑–æ–≤—ã–µ —Ç–µ–≥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    const categoryTags = {
        '–†–∞—Å—Ç–µ–Ω–∏—è': ['—Ä–∞—Å—Ç–µ–Ω–∏—è', '–∞–∫–≤–∞—Ä–∏—É–º–Ω—ã–µ', '–∑–µ–ª–µ–Ω—ã–µ', '–∂–∏–≤—ã–µ', '–¥–µ–∫–æ—Ä'],
        '–†—ã–±–∫–∏': ['—Ä—ã–±–∫–∏', '–∞–∫–≤–∞—Ä–∏—É–º–Ω—ã–µ', '—Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏–µ', '—Ü–≤–µ—Ç–Ω—ã–µ', '–∂–∏–≤—ã–µ'],
        '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ': ['–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', '–∞–∫–≤–∞—Ä–∏—É–º', '—Ç–µ—Ö–Ω–∏–∫–∞', '—Ñ–∏–ª—å—Ç—Ä', '–Ω–∞—Å–æ—Å'],
        '–î–µ–∫–æ—Ä': ['–¥–µ–∫–æ—Ä', '—É–∫—Ä–∞—à–µ–Ω–∏—è', '–¥–∏–∑–∞–π–Ω', '–∫–∞–º–Ω–∏', '–∫–æ—Ä—è–≥–∏'],
        '–ö–æ—Ä–º–∞': ['–∫–æ—Ä–º', '–ø–∏—Ç–∞–Ω–∏–µ', '—Ä—ã–±–∫–∏', '–≤–∏—Ç–∞–º–∏–Ω—ã', '–≥—Ä–∞–Ω—É–ª—ã']
    };

    let tags = [...(categoryTags[category] || ['–∞–∫–≤–∞—Ä–∏—É–º'])];

    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è
    const nameWords = name.toLowerCase().split(' ').filter(word => word.length > 3);
    tags = [...tags, ...nameWords];

    // –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    tags = [...new Set(tags)].slice(0, 8);

    document.getElementById('productTags').value = tags.join(', ');

    addAIMessage(`–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª —Ç–µ–≥–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∏—Å–∫–∞: "${tags.join(', ')}". –≠—Ç–∏ —Ç–µ–≥–∏ –ø–æ–º–æ–≥—É—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ –≤–∞—à —Ç–æ–≤–∞—Ä üîç`);
}

function aiGenerateAll() {
    const name = document.getElementById('productName').value;

    if (!name) {
        showNotification('–°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', 'warning');
        return;
    }

    addAIMessage("–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é –≤—Å–µ –ø–æ–ª—è —Ç–æ–≤–∞—Ä–∞...", true);

    setTimeout(() => {
        removeTemporaryMessages();

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –ø–æ–ª—è
        aiGenerateDescription();
        setTimeout(() => {
            aiSuggestPrice();
            generateSKU();
            aiGenerateTags();
            generateSEO();

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –±–µ–π–¥–∂
            const badges = ['new', 'recommend'];
            const randomBadge = badges[Math.floor(Math.random() * badges.length)];
            document.getElementById(`badge_${randomBadge}`).checked = true;
            updateBadges();

            addAIMessage("–í—Å—ë –≥–æ—Ç–æ–≤–æ! –ó–∞–ø–æ–ª–Ω–∏–ª –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è —Ç–æ–≤–∞—Ä–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚úÖ");
        }, 1000);
    }, 500);
}

// –î—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
function generateSEO() {
    const name = document.getElementById('productName').value;
    const category = document.getElementById('productCategory').selectedOptions[0]?.text || '';
    const price = document.getElementById('productPrice').value;

    if (!name) {
        showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SEO', 'warning');
        return;
    }

    const metaTitle = `${name} - –∫—É–ø–∏—Ç—å –≤ –ê–∫–≤–∞–°–±–æ—Ä${price ? ' –æ—Ç ' + price + ' —Ä—É–±' : ''}`;
    const metaDescription = `${name} –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ${category}. –õ—É—á—à–∏–µ —Ü–µ–Ω—ã, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –±—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞. –ó–∞–∫–∞–∑–∞—Ç—å ${name} –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ –ê–∫–≤–∞–°–±–æ—Ä.`;

    document.querySelector('[name="meta_title"]').value = metaTitle.substring(0, 60);
    document.querySelector('[name="meta_description"]').value = metaDescription.substring(0, 160);

    showNotification('SEO –¥–∞–Ω–Ω—ã–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
}

function updateBadges() {
    const badges = [];
    document.querySelectorAll('.badges-container input[type="checkbox"]:checked').forEach(checkbox => {
        badges.push(checkbox.value);
    });
    document.getElementById('selectedBadges').value = JSON.stringify(badges);
    updatePreview();
}

function calculateDiscount() {
    const price = parseFloat(document.getElementById('productPrice').value) || 0;
    const oldPrice = parseFloat(document.getElementById('productOldPrice').value) || 0;

    if (price > 0 && oldPrice > price) {
        const discount = Math.round(((oldPrice - price) / oldPrice) * 100);
        const savings = oldPrice - price;
        document.getElementById('discountInfo').innerHTML = 
            `<small class="text-success">–°–∫–∏–¥–∫–∞: ${discount}% (—ç–∫–æ–Ω–æ–º–∏—è ${savings.toFixed(0)} ‚ÇΩ)</small>`;

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ–º –±–µ–π–¥–∂ —Å–∫–∏–¥–∫–∏
        document.getElementById('badge_discount').checked = true;
        updateBadges();
    } else {
        document.getElementById('discountInfo').innerHTML = '';
    }
}

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–æ—Ä–º—ã
function initFormTracking() {
    const form = document.getElementById('productForm');
    const inputs = form.querySelectorAll('input, select, textarea');

    inputs.forEach(input => {
        input.addEventListener('input', updatePreview);
        input.addEventListener('change', updatePreview);
    });

    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    document.getElementById('productName').addEventListener('input', function() {
        const length = this.value.length;
        document.getElementById('nameLength').textContent = length;

        const seoScore = document.getElementById('nameSeoScore');
        if (length < 10) {
            seoScore.innerHTML = '<span class="text-warning">üìà –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ –¥–ª—è SEO</span>';
        } else if (length < 30) {
            seoScore.innerHTML = '<span class="text-success">‚úÖ –•–æ—Ä–æ—à–æ –¥–ª—è SEO</span>';  
        } else if (length < 60) {
            seoScore.innerHTML = '<span class="text-success">üéØ –û—Ç–ª–∏—á–Ω–æ –¥–ª—è SEO</span>';
        } else {
            seoScore.innerHTML = '<span class="text-danger">‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ</span>';
        }
    });

    document.getElementById('productDescription').addEventListener('input', function() {
        const length = this.value.length;
        document.getElementById('descLength').textContent = length;

        const readability = document.getElementById('readabilityScore');
        const seoAnalysis = document.getElementById('seoAnalysis');

        if (length < 100) {
            readability.textContent = '–ö–æ—Ä–æ—Ç–∫–æ';
            readability.className = 'fw-bold text-warning';
            seoAnalysis.innerHTML = '<span class="text-danger">–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ</span>';
        } else if (length < 300) {
            readability.textContent = '–•–æ—Ä–æ—à–æ';
            readability.className = 'fw-bold text-success';
            seoAnalysis.innerHTML = '<span class="text-success">–•–æ—Ä–æ—à–æ</span>';
        } else if (length < 600) {
            readability.textContent = '–û—Ç–ª–∏—á–Ω–æ';  
            readability.className = 'fw-bold text-success';
            seoAnalysis.innerHTML = '<span class="text-success">–û—Ç–ª–∏—á–Ω–æ</span>';
        } else {
            readability.textContent = '–û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ';
            readability.className = 'fw-bold text-info';
            seoAnalysis.innerHTML = '<span class="text-info">–û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ</span>';
        }
    });

    document.getElementById('productShortDescription').addEventListener('input', function() {
        document.getElementById('shortDescLength').textContent = this.value.length;
    });

    // Meta –ø–æ–ª—è
    document.querySelector('[name="meta_title"]').addEventListener('input', function() {
        document.getElementById('metaTitleLength').textContent = this.value.length;
    });

    document.querySelector('[name="meta_description"]').addEventListener('input', function() {
        document.getElementById('metaDescLength').textContent = this.value.length;
    });

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–∫–∏–¥–∫–∏
    ['productPrice', 'productOldPrice'].forEach(id => {
        document.getElementById(id).addEventListener('input', calculateDiscount);
    });
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
function updatePreview() {
    const name = document.getElementById('productName').value || '–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞';
    const price = document.getElementById('productPrice').value || '0';
    const oldPrice = document.getElementById('productOldPrice').value || '';
    const description = document.getElementById('productDescription').value || '–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...';
    const categoryText = document.getElementById('productCategory').selectedOptions[0]?.text || '–ö–∞—Ç–µ–≥–æ—Ä–∏—è';

    // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    document.getElementById('previewName').textContent = name;
    document.getElementById('previewPrice').textContent = formatPrice(price);
    document.getElementById('previewDescription').textContent = description.substring(0, 120) + 
        (description.length > 120 ? '...' : '');
    document.getElementById('previewCategory').textContent = categoryText;

    // –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞
    const oldPriceElement = document.getElementById('previewOldPrice');
    if (oldPrice && parseFloat(oldPrice) > parseFloat(price)) {
        oldPriceElement.textContent = formatPrice(oldPrice);
        oldPriceElement.style.display = 'inline';
    } else {
        oldPriceElement.style.display = 'none';
    }

    // –ë–µ–π–¥–∂–∏
    const badges = JSON.parse(document.getElementById('selectedBadges').value || '[]');
    const badgeColors = {
        new: 'success', hit: 'danger', recommend: 'warning', 
        discount: 'info', premium: 'dark', eco: 'success'
    };
    const badgeTexts = {
        new: 'üÜï –ù–æ–≤–∏–Ω–∫–∞', hit: 'üî• –•–∏—Ç', recommend: '‚≠ê –¢–û–ü', 
        discount: 'üí∏ –°–∫–∏–¥–∫–∞', premium: 'üíé –ü—Ä–µ–º–∏—É–º', eco: 'üåø –≠–∫–æ'
    };

    const badgesHtml = badges.map(badge => 
        `<span class="badge bg-${badgeColors[badge] || 'secondary'} me-1 mb-1">${badgeTexts[badge] || badge}</span>`
    ).join('');

    document.getElementById('previewBadges').innerHTML = badgesHtml;

    // –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏  
    const specs = [];
    ['size', 'temperature', 'ph_level'].forEach(field => {
        const value = document.querySelector(`[name="${field}"]`).value;
        if (value) {
            const labels = { size: 'üìè', temperature: 'üå°Ô∏è', ph_level: 'üíß' };
            specs.push(`${labels[field]} ${value}`);
        }
    });

    document.getElementById('previewSpecs').innerHTML = specs.length ? 
        '<small class="text-muted d-block mt-2">' + specs.join(' ‚Ä¢ ') + '</small>' : '';

    // –ò–∫–æ–Ω–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const mainImage = document.getElementById('mainImagePath').value;
    const icon = document.getElementById('previewImageIcon');

    if (mainImage) {
        icon.className = 'fas fa-check-circle fa-2x text-success';
        icon.title = '–û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
    } else {
        icon.className = 'fas fa-image fa-2x text-muted';
        icon.title = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function formatPrice(price) {
    return new Intl.NumberFormat('ru-RU', {
        style: 'currency',
        currency: 'RUB',
        minimumFractionDigits: 0
    }).format(price);
}

function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function showNotification(message, type = 'success') {
    const alertClass = type === 'success' ? 'alert-success' : 
                      type === 'error' ? 'alert-danger' : 
                      type === 'warning' ? 'alert-warning' : 'alert-info';

    const alert = document.createElement('div');
    alert.className = `alert ${alertClass} alert-dismissible fade show position-fixed`;
    alert.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px; border-radius: 0.5rem;';
    alert.innerHTML = `
        <div class="d-flex align-items-center">
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-triangle' : 'info-circle'} me-2"></i>
            ${message}
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;

    document.body.appendChild(alert);

    setTimeout(() => {
        if (alert.parentNode) {
            alert.remove();
        }
    }, 5000);
}

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function saveAsDraft() {
    const formData = new FormData(document.getElementById('productForm'));
    const draftData = {};

    for (let [key, value] of formData.entries()) {
        draftData[key] = value;
    }

    localStorage.setItem('product_draft_' + Date.now(), JSON.stringify(draftData));
    showNotification('–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ!', 'success');
    addAIMessage('–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –í—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–∑–∂–µ üíæ');
}

function previewProduct() {
    updatePreview();

    // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    const modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.innerHTML = `
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="ratio ratio-1x1 bg-light rounded d-flex align-items-center justify-content-center border">
                                ${document.getElementById('mainImagePath').value ? 
                                    `<img src="${document.getElementById('mainImagePath').value}" class="img-fluid rounded">` :
                                    '<i class="fas fa-image fa-4x text-muted"></i>'
                                }
                            </div>
                        </div>
                        <div class="col-md-6">
                            ${document.getElementById('productPreview').innerHTML}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;

    document.body.appendChild(modal);
    const modalInstance = new bootstrap.Modal(modal);
    modalInstance.show();

    modal.addEventListener('hidden.bs.modal', () => {
        modal.remove();
    });
}

function confirmReset() {
    if (confirm('üóëÔ∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—é —Ñ–æ—Ä–º—É? –í—Å–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã!')) {
        document.getElementById('productForm').reset();
        galleryImages = [];
        updateGalleryPreview();
        updateGalleryInput();
        document.getElementById('selectedBadges').value = '[]';
        document.getElementById('mainImagePath').value = '';
        removeMainImage();
        updatePreview();

        // –û—á–∏—â–∞–µ–º —á–∞—Ç —Å –ò–ò
        const container = document.getElementById('aiChatContainer');
        container.innerHTML = `
            <div class="ai-message mb-3">
                <div class="d-flex">
                    <div class="ai-avatar bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 35px; height: 35px; font-size: 14px;">
                        ü§ñ
                    </div>
                    <div class="ai-message-content">
                        <div class="bg-light rounded p-2">
                            <strong>–ò–ò –ü–æ–º–æ—â–Ω–∏–∫:</strong><br>
                            –§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞! –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä. –ù–∞—á–Ω–µ–º —Å–Ω–∞—á–∞–ª–∞? üöÄ
                        </div>
                        <small class="text-muted">–¢–æ–ª—å–∫–æ —á—Ç–æ</small>
                    </div>
                </div>
            </div>
        `;

        showNotification('–§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞!', 'info');
    }
}

// –ò–ò —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∑–∞–≥–ª—É—à–∫–∏)
function aiGenerateImage() {
    addAIMessage("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é –ò–ò –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö! –ê –ø–æ–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –≤—Ä—É—á–Ω—É—é üì∏");
}

function aiEnhanceImages() {
    if (galleryImages.length === 0 && !document.getElementById('mainImagePath').value) {
        showNotification('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'warning');
        return;
    }

    addAIMessage("–§—É–Ω–∫—Ü–∏—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! –°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ç–æ üé®");
}

function aiRemoveBackground() {
    addAIMessage("–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –ø—Ä–µ–º–∏—É–º –≤–µ—Ä—Å–∏–∏! –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ ‚úÇÔ∏è");
}

function aiOptimizeImages() {
    addAIMessage("–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–º–æ–∂–µ—Ç —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Å–∞–π—Ç–∞. –§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö üöÄ");
}
</script>
